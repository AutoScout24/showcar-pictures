"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function addClass(e,t){if(!t.getAttribute)return t;var i=[],s=t.getAttribute("class");return s?(i=s.split(" "),i.indexOf(e)===-1&&(s=i.concat(e).join(" "))):s=e,t.setAttribute("class",s),t}function removeClass(e,t){if(!t.getAttribute)return t;var i=[],s=t.getAttribute("class");return s&&(i=s.split(" "),i.indexOf(e)!==-1&&i.splice(i.indexOf(e),1),t.setAttribute("class",i.join(" "))),t}function containsClass(e,t){if(!t.getAttribute)return!1;var i=[],s=t.getAttribute("class");return s&&(i=s.split(" ")),i.indexOf(e)>-1}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Pictures=function(){function e(t){_classCallCheck(this,e),this.element=t,this.resizeListener=null,this.thumbnailsVisible=!1,this.fullScreenState=!1}return _createClass(e,[{key:"addThumbnails",value:function(){var e=this;this.thumbnailsItems=this.thumbnails.querySelectorAll(".as24-carousel-item"),this.thumbnailsItems&&(addClass("active",this.thumbnailsItems[0]),[].forEach.call(this.thumbnailsItems,function(t,i){t.addEventListener("click",function(t){t.preventDefault(),e.slider.goTo(i)})}))}},{key:"addSlider",value:function(){var e=this;this.slider.addEventListener("slide",function(t){var i=t.detail.index;if(e.thumbnails){var s=i>e.thumbnails.getStepLength()?e.thumbnails.getStepLength():i;e.thumbnails.goTo(s),[].forEach.call(e.thumbnailsItems,function(e){return removeClass("active",e)}),addClass("active",e.thumbnailsItems[i])}})}},{key:"setFullScreenState",value:function(e){if(this.fullScreenState!==e){this.fullScreenState=e;var t=parseInt(this.slider.getIndex());this.fullScreenState?addClass("as24-pictures--fullscreen",this.element):removeClass("as24-pictures--fullscreen",this.element);var i=this,s=new CustomEvent("as24-pictures.fullscreen",{detail:{state:e}});document.body.dispatchEvent(s),window.setTimeout(function(){i.slider.setAttribute("preview",String(!e)),i.setThumbnailMouseListeners(!e),[].forEach.call(i.container,function(e){return addClass("no-transition",e)}),i.slider.redraw(e?"data-fullscreen-src":"data-src"),i.slider.goTo(t),i.thumbnails.redraw(),i.thumbnails.goTo(t),[].forEach.call(i.container,function(e){return removeClass("no-transition",e)}),i.redraw()})}}},{key:"fullScreenOpenHandler",value:function(e){if(e.preventDefault(),!(window.innerWidth<1023)){var t=e.target||e.srcElement;this.fullScreenState||"img"!==t.nodeName.toLowerCase()||this.setFullScreenState(!0)}}},{key:"fullScreenCloseHandler",value:function(e){e.preventDefault();var t=e.target||e.srcElement;this.fullScreenState&&("as24-pictures"===t.nodeName.toLowerCase()||t.classList.contains("as24-pictures__fullscreen-close"))&&this.setFullScreenState(!1)}},{key:"attached",value:function(){this.addContainer(),this.slider=this.element.querySelector(".as24-pictures__slider"),this.slider&&(this.addSlider(),this.element.querySelector(".video-container")&&this.slider.addEventListener("slide",function(e){if(0!==e.detail.index){var t=document.querySelector("as24-pictures .video-container iframe");t.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}})),this.thumbnails=this.element.querySelector(".as24-pictures__thumbnails"),this.thumbnails&&this.addThumbnails(),this.fullScreen=this.element.querySelector(".as24-pictures as24-carousel"),this.fullScreen&&(this.fullScreenOpenListener=this.fullScreenOpenHandler.bind(this),this.fullScreen.addEventListener("click",this.fullScreenOpenListener)),this.fullScreenCloseListener=this.fullScreenCloseHandler.bind(this),this.element.addEventListener("click",this.fullScreenCloseListener),this.closeButton=this.element.querySelector(".as24-pictures__fullscreen-close"),this.closeButton&&this.closeButton.addEventListener("click",this.fullScreenCloseListener),this.resizeListener=this.resizeTimeoutHandler.bind(this),window.addEventListener("resize",this.resizeListener,!0),this.setThumbnailMouseListeners(!0),this.redraw()}},{key:"detached",value:function(){window.removeEventListener("resize",this.resizeListener,!0),this.setThumbnailMouseListeners(!1),this.fullScreen=this.element.querySelector("as24-pictures as24-carousel"),this.fullScreen&&this.fullScreen.removeEventListener("click",this.fullScreenOpenListener),this.closeButton=this.element.querySelector(".as24-pictures__fullscreen-close"),this.closeButton&&this.closeButton.addEventListener("click",this.fullScreenCloseListener),this.element.removeEventListener("click",this.fullScreenCloseListener),this.removeContainer()}},{key:"setThumbnailMouseListeners",value:function(e){this.sliderContainer=this.element.querySelector(".as24-pictures__slider-container"),e?(this.setThumbnailMouseListeners(!1),this.mouseEnterListener=this.mouseEnterHandler.bind(this),this.mouseLeaveListener=this.mouseLeaveHandler.bind(this),this.sliderContainer.addEventListener("mouseover",this.mouseEnterListener,!0),this.sliderContainer.addEventListener("mouseleave",this.mouseLeaveListener,!0)):(this.sliderContainer.removeEventListener("mouseover",this.mouseEnterListener,!0),this.sliderContainer.removeEventListener("mouseleave",this.mouseLeaveListener,!0),this.setThumbnailVisibility(!1))}},{key:"addContainer",value:function(){var e=this;return containsClass("as24-pictures__wrapper",this.element.firstChild)?(this.wrapper=this.element.querySelector(".as24-pictures__wrapper"),void(this.container=this.element.querySelector(".as24-pictures__container"))):(this.wrapper=document.createElement("div"),addClass("as24-pictures__wrapper",this.wrapper),this.container=document.createElement("div"),addClass("as24-pictures__container",this.container),[].forEach.call(this.element.children,function(t){var i=t.cloneNode(!0);e.container.appendChild(i)}),this.wrapper.appendChild(this.container),this.element.innerHTML="",void this.element.appendChild(this.wrapper))}},{key:"removeContainer",value:function(){var e=this;[].forEach.call(this.container.children,function(t){e.container.removeChild(t)}),this.wrapper.removeChild(this.container),this.element.removeChild(this.wrapper)}},{key:"mouseEnterHandler",value:function(e){var t=e.target||e.srcElement,i=this.slider.querySelectorAll(".as24-pagination-button");return!i||t!=i[0]&&t!=i[1]?void this.setThumbnailVisibility(!0):(e.stopPropagation(),void this.setThumbnailVisibility(!1))}},{key:"mouseLeaveHandler",value:function(){this.setThumbnailVisibility(!1)}},{key:"setThumbnailVisibility",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.thumbnails&&this.thumbnailsVisible!==e){this.thumbnailsVisible=e;var t=this.element.querySelector(".as24-pagination-indicator"),i="as24-pictures__thumbnails--visible",s="as24-pagination-indicator--upped";e?addClass(i,this.thumbnails):removeClass(i,this.thumbnails),t&&(e?addClass(s,t):removeClass(s,t))}}},{key:"redraw",value:function(){var e=containsClass("as24-pictures--fullscreen",this.element);if(!e){var t=this.getElementSize(this.slider);t.width<=480?this.setThumbnailMouseListeners(!1):this.setThumbnailMouseListeners(!0)}}},{key:"resizeHandler",value:function(){var e=this.getWindowWidth();this.windowWidth!==e&&(this.windowWidth=e,this.redraw())}},{key:"resizeTimeoutHandler",value:function(){this.resizeHandler()}},{key:"getWindowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"getElementSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.element:arguments[0],t=getComputedStyle(e),i=e.offsetWidth;i-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);var s=e.offsetHeight;return s-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),{width:i,height:s}}}]),e}();!function(){var e=function(){this.pictures=new Pictures(this)},t=function(){this.pictures.attached()},i=function(){this.carousel.detached(),delete this.carousel};try{document.registerElement("as24-pictures",{prototype:Object.assign(Object.create(HTMLElement.prototype,{createdCallback:{value:e},attachedCallback:{value:t},detachedCallback:{value:i}}))})}catch(e){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-pictures".',e)}}();
//# sourceMappingURL=dist/showcar-pictures.min.js.map