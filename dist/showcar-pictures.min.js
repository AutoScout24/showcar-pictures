"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function addClass(e,t){if(!t.getAttribute)return t;var i=[],s=t.getAttribute("class");return s?(i=s.split(" "),i.indexOf(e)===-1&&(s=i.concat(e).join(" "))):s=e,t.setAttribute("class",s),t}function removeClass(e,t){if(!t.getAttribute)return t;var i=[],s=t.getAttribute("class");return s&&(i=s.split(" "),i.indexOf(e)!==-1&&i.splice(i.indexOf(e),1),t.setAttribute("class",i.join(" "))),t}function containsClass(e,t){if(!t.getAttribute)return!1;var i=[],s=t.getAttribute("class");return s&&(i=s.split(" ")),i.indexOf(e)>-1}function toggleClass(e,t){return containsClass(e,t)?removeClass(e,t):addClass(e,t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Pictures=function(){function e(t){_classCallCheck(this,e),this.element=t,this.resizeListener=null,this.thumbnailsVisible=!1,this.fullScreenState=!1}return _createClass(e,[{key:"addThumbnails",value:function(){var e=this;this.thumbnailsItems=this.thumbnails.querySelectorAll(".as24-carousel-item"),this.thumbnailsItems&&(addClass("active",this.thumbnailsItems[0]),[].forEach.call(this.thumbnailsItems,function(t,i){t.addEventListener("click",function(t){t.preventDefault(),e.slider.goTo(i)})}))}},{key:"addSlider",value:function(){var e=this;this.slider.addEventListener("slide",function(t){var i=t.detail.index;if(e.thumbnails){var s=i>e.thumbnails.getStepLength()?e.thumbnails.getStepLength():i;e.thumbnails.goTo(s),[].forEach.call(e.thumbnailsItems,function(e){return removeClass("active",e)}),addClass("active",e.thumbnailsItems[i])}})}},{key:"setFullScreenState",value:function(e){if(this.fullScreenState!==e){this.fullScreenState=e;var t=parseInt(this.slider.getIndex());this.fullScreenState?addClass("fullScreen",this.element):removeClass("fullScreen",this.element),this.slider.setAttribute("preview",String(!this.fullScreenState)),this.setThumbnailMouseListeners(!this.fullScreenState),[].forEach.call(this.container,function(e){return addClass("no-transition",e)}),this.slider.redraw(),this.slider.goTo(t),this.thumbnails.redraw(),this.thumbnails.goTo(t),[].forEach.call(this.container,function(e){return removeClass("no-transition",e)}),this.redraw()}}},{key:"fullScreenButtonHandler",value:function(e){e.preventDefault(),this.setFullScreenState(!this.fullScreenState)}},{key:"attached",value:function(){this.addContainer(),this.slider=this.element.querySelector(".as24-pictures-slider"),this.slider&&this.addSlider(),this.thumbnails=this.element.querySelector(".as24-pictures-thumbnails"),this.thumbnails&&this.addThumbnails(),this.fullScreen=this.element.querySelector(".as24-pictures-fullScreen"),this.fullScreen&&(this.fullScreenButtonListener=this.fullScreenButtonHandler.bind(this),this.fullScreen.addEventListener("click",this.fullScreenButtonListener)),this.resizeListener=this.resizeTimeoutHandler.bind(this),window.addEventListener("resize",this.resizeListener,!0),this.setThumbnailMouseListeners(!0),this.redraw()}},{key:"detached",value:function(){window.removeEventListener("resize",this.resizeListener,!0),this.setThumbnailMouseListeners(!1),this.fullScreen=this.element.querySelector(".as24-pictures-fullScreen"),this.fullScreen&&this.fullScreen.removeEventListener("click",this.fullScreenButtonListener),this.removeContainer()}},{key:"setThumbnailMouseListeners",value:function(e){e?(this.setThumbnailMouseListeners(!1),this.mouseMoveListener=this.mouseMoveHandler.bind(this),this.mouseLeaveListener=this.mouseLeaveHandler.bind(this),this.element.addEventListener("mousemove",this.mouseMoveListener,!0),this.element.addEventListener("mouseleave",this.mouseLeaveListener,!0)):(this.element.removeEventListener("mousemove",this.mouseMoveListener,!0),this.element.removeEventListener("mouseleave",this.mouseLeaveListener,!0),this.setThumbnailVisibility(!1))}},{key:"addContainer",value:function(){var e=this;return containsClass("as24-pictures-wrapper",this.element.firstChild)?(this.wrapper=this.element.querySelector(".as24-pictures-wrapper"),void(this.container=this.element.querySelector(".as24-pictures-container"))):(this.wrapper=document.createElement("div"),addClass("as24-pictures-wrapper",this.wrapper),this.container=document.createElement("div"),addClass("as24-pictures-container",this.container),[].forEach.call(this.element.children,function(t){var i=t.cloneNode(!0);e.container.appendChild(i)}),this.wrapper.appendChild(this.container),this.element.innerHTML="",void this.element.appendChild(this.wrapper))}},{key:"removeContainer",value:function(){var e=this;[].forEach.call(this.container.children,function(t){e.container.removeChild(t)}),this.wrapper.removeChild(this.container),this.element.removeChild(this.wrapper)}},{key:"mouseMoveHandler",value:function(e){var t=this.getElementSize(this.slider),i=60,s=this.thumbnails.offsetHeight+i;e.clientY>=t.height-s&&e.clientY<=t.height?this.setThumbnailVisibility(!0):e.clientY<t.height-s&&e.clientY>=0&&this.setThumbnailVisibility(!1)}},{key:"mouseLeaveHandler",value:function(){this.setThumbnailVisibility(!1)}},{key:"setThumbnailVisibility",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.thumbnailsVisible!==e){this.thumbnailsVisible=e;var t=this.thumbnails.offsetHeight,i=e?t:0;i=~i+1,this.move({element:this.thumbnails,y:i});var s=this.element.querySelector(".as24-pagination-indicator");s&&this.move({element:s,y:i})}}},{key:"redraw",value:function(){var e=containsClass("fullScreen",this.element);if(!e){var t=this.getElementSize(this.slider);t.width<=480?this.setThumbnailMouseListeners(!1):this.setThumbnailMouseListeners(!0)}}},{key:"move",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{element:this.element,x:0,y:0}:arguments[0],t=e.element,i=void 0===t?this.element:t,s=e.x,n=void 0===s?0:s,r=e.y,l=void 0===r?0:r;i.style.transform="translate3d("+n+"px, "+l+"px, 0)",i.style.webkitTransform="translate3d("+n+"px, "+l+"px. 0)"}},{key:"resizeHandler",value:function(){var e=this.getWindowWidth();this.windowWidth!==e&&(this.windowWidth=e,this.redraw())}},{key:"resizeTimeoutHandler",value:function(){this.resizeHandler()}},{key:"getWindowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"getElementSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.element:arguments[0],t=getComputedStyle(e),i=e.offsetWidth;i-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);var s=e.offsetHeight;return s-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),{width:i,height:s}}}]),e}();!function(){var e=function(){this.pictures=new Pictures(this)},t=function(){this.pictures.attached()},i=function(){this.carousel.detached(),delete this.carousel};try{document.registerElement("as24-pictures",{prototype:Object.assign(Object.create(HTMLElement.prototype,{createdCallback:{value:e},attachedCallback:{value:t},detachedCallback:{value:i}}))})}catch(s){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-pictures".',s)}}();
//# sourceMappingURL=dist/showcar-pictures.min.js.map